<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Drag to Divide</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #121212;
        color: #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        margin: 0;
    }

    h1 {
        margin-bottom: 5px;
    }

    #instruction {
        margin-bottom: 20px;
        font-size: 18px;
    }

    #object {
        position: relative;
        width: 400px;
        height: 80px;
        background: linear-gradient(135deg, #8b5a2b, #c68642);
        border-radius: 10px;
        cursor: crosshair;
        user-select: none;
    }

    .cut-line {
        position: absolute;
        top: 0;
        width: 3px;
        height: 100%;
        background: red;
        pointer-events: none;
    }

    #message {
        margin-top: 20px;
        font-size: 20px;
        height: 24px;
    }

    button {
        margin-top: 15px;
        padding: 8px 16px;
        font-size: 16px;
        cursor: pointer;
    }
</style>
</head>
<body>

<h1>✂️ Drag to Divide</h1>
<div id="instruction"></div>

<div id="object"></div>

<div id="message"></div>
<button onclick="resetGame()">New Round</button>

<script>
    const object = document.getElementById("object");
    const instruction = document.getElementById("instruction");
    const message = document.getElementById("message");

    let targetParts = 0;
    let cuts = [];

    function newRound() {
        cuts = [];
        object.innerHTML = "";
        message.textContent = "";

        targetParts = Math.floor(Math.random() * 4) + 2; // 2–5 parts
        instruction.textContent = `Divide the object into exactly ${targetParts} equal parts`;
    }

    object.addEventListener("mousedown", (e) => {
        const rect = object.getBoundingClientRect();
        const x = e.clientX - rect.left;

        // Prevent cuts too close to edges
        if (x < 20 || x > rect.width - 20) return;

        cuts.push(x);

        const line = document.createElement("div");
        line.className = "cut-line";
        line.style.left = `${x}px`;
        object.appendChild(line);

        checkResult();
    });

    function checkResult() {
        const totalParts = cuts.length + 1;

        if (totalParts === targetParts) {
            const sorted = [...cuts].sort((a, b) => a - b);
            const widths = [];
            let prev = 0;

            sorted.forEach(cut => {
                widths.push(cut - prev);
                prev = cut;
            });
            widths.push(object.clientWidth - prev);

            const tolerance = 15;
            const first = widths[0];

            const equal = widths.every(w => Math.abs(w - first) < tolerance);

            if (equal) {
                message.textContent = "✅ Perfect division!";
                message.style.color = "#4CAF50";
            } else {
                message.textContent = "❌ Parts are not equal";
                message.style.color = "#f44336";
            }
        } else if (totalParts > targetParts) {
            message.textContent = "❌ Too many divisions!";
            message.style.color = "#f44336";
        }
    }

    function resetGame() {
        newRound();
    }

    newRound();
</script>

</body>
</html>
