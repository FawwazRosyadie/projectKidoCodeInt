<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alam Melayu: Empire Architect</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="game-wrapper">
        <!-- System Status Info -->
        <div id="system-info">Season: Monsoon (Trade Speed -20%)</div>

        <!-- Header -->
        <header>
            <div class="main-logo">
                <span style="font-size: 2.5rem;">üëë</span>
                <h1 data-key="game_title">Alam Melayu: Empire Architect</h1>
            </div>

            <div class="resources-bar">
                <div class="res-pill">
                    <span class="res-label" data-key="res_rice">Rice (Beras)</span>
                    <div class="res-value"><span style="color:var(--rice-green)">üåæ</span> <span id="val-rice">0</span>
                    </div>
                </div>
                <div class="res-pill">
                    <span class="res-label" data-key="res_gold">Wealth (Emas)</span>
                    <div class="res-value"><span style="color:var(--primary-gold)">üí∞</span> <span
                            id="val-gold">100</span></div>
                </div>
                <div class="res-pill" style="min-width: 120px;">
                    <span class="res-label" data-key="res_power">Influence (Wibawa)</span>
                    <div class="res-value"><span style="color:var(--accent-red)">üî•</span> <span id="val-power">0</span>
                    </div>
                </div>
                <div class="res-pill">
                    <span class="res-label" data-key="res_score">Score</span>
                    <div class="res-value" id="val-score" style="color: #fff">0</div>
                </div>
            </div>

            <div style="display: flex; gap: 20px; align-items: center;">
                <div id="timer-display"
                    style="font-family: sans-serif; font-size: 1.5rem; color: var(--accent-red); font-weight: 700;">
                    10:00</div>
                <button class="btn" style="width: auto; padding: 10px 20px;" id="btn-lang">Language: MS</button>
            </div>
        </header>

        <!-- Main Workspace -->
        <main class="game-layout">

            <!-- Left Panel: Administration (Government) -->
            <section class="side-panel">
                <div style="display: flex;">
                    <button class="panel-tab-btn active" data-key="tab_admin">Pentadbiran</button>
                    <button class="panel-tab-btn" data-key="tab_edu">Ensiklopedia</button>
                </div>
                <div class="panel-header">
                    <span data-key="section_gov">Sistem Pemerintahan</span>
                    <span id="gov-influence-level">Lvl 1</span>
                </div>
                <div class="panel-content" id="admin-panel-list">
                    <!-- Dynamic Official Cards -->
                </div>
                <!-- History/Educational Tab (Hidden by default) -->
                <div class="panel-content hidden" id="history-panel-content">
                    <div class="card">
                        <p class="card-desc" style="color:gold">Did You Know?</p>
                        <p id="historical-fact">Loading facts...</p>
                    </div>
                </div>
            </section>

            <!-- Center Panel: The World -->
            <section class="viewport">
                <div id="weather-overlay"></div>
                <div id="world-map">
                    <!-- Interactive Nodes -->
                    <div class="kingdom-node" style="top: 30%; left: 30%;">
                        <div class="node-icon">üåæ</div>
                        <div class="node-label" data-key="node_farm">Valley of Plenty</div>
                    </div>
                    <div class="kingdom-node" style="top: 20%; left: 70%;">
                        <div class="node-icon">üêÖ</div>
                        <div class="node-label" data-key="node_forest">Royal Jungle</div>
                    </div>
                    <div class="kingdom-node" style="bottom: 10%; left: 50%;">
                        <div class="node-icon">‚õµ</div>
                        <div class="node-label" data-key="node_port">Empire Harbor</div>
                    </div>
                    <div class="kingdom-node" style="bottom: 35%; right: 15%;">
                        <div class="node-icon">üíé</div>
                        <div class="node-label" data-key="node_mine">Golden Hills</div>
                    </div>

                    <!-- Visual Kingdom Growth -->
                    <div class="building-layer">
                        <div class="building-spot" id="spot-1"></div>
                        <div class="building-spot" id="spot-2"></div>
                        <div class="building-spot" id="spot-3"></div>
                        <div class="building-spot" id="spot-4"></div>
                        <div class="building-spot" id="spot-5"></div>
                    </div>
                </div>
            </section>

            <!-- Right Panel: Economy & Trade -->
            <section class="side-panel">
                <div class="panel-header">
                    <span data-key="section_econ">Kegiatan Ekonomi</span>
                    <span>üìà</span>
                </div>
                <div class="panel-content" id="market-panel-list">
                    <!-- Dynamic Upgrade Cards -->
                </div>
                <div style="padding: 20px; border-top: 1px solid var(--glass-border);">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span style="font-size: 0.8rem;" data-key="empire_rank">Pangkat Empayar:</span>
                        <span id="txt-empire-rank" style="font-weight: 800; color: var(--primary-gold);">Village</span>
                    </div>
                    <div style="height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px;">
                        <div id="progress-empire"
                            style="width: 10%; height: 100%; background: var(--primary-gold); border-radius: 3px; transition: width 0.5s;">
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Start Overlay -->
    <div id="start-overlay" class="overlay">
        <div class="modal-content">
            <h2 data-key="start_title">Empire Architect</h2>
            <div class="tutorial-text" data-key="start_instruction">
                Welcome, Ruler. You have been chosen to govern one of the legendary kingdoms of Alam Melayu.
                <br><br>
                <b>Objective:</b> Grow your kingdom into a Golden Empire (Zaman Keemasan).
                <br><br>
                <b>Administration:</b> Appoint officials like the <i>Wazir</i> or <i>Syahbandar</i> to automate and
                boost your influence.
                <br><br>
                <b>Economy:</b> Harvest resources from the map and upgrade your trade systems. Watch out for seasons!
                The Monsoon affects your trade ports.
            </div>

            <div style="display: flex; flex-direction: column; gap: 20px; align-items: center;">
                <div style="display: flex; gap: 15px; align-items: center;">
                    <span style="font-weight: 800;" data-key="choose_kingdom">CHOOSE YOUR KINGDOM:</span>
                    <select id="kingdom-select"
                        style="background: #111; color: gold; border: 2px solid gold; padding: 10px 20px; font-family: sans-serif; border-radius: 5px; cursor: pointer;">
                        <option value="funan">FUNAN (Agricultural Pioneer)</option>
                        <option value="srivijaya">SRIVIJAYA (Maritime Mastery)</option>
                        <option value="angkor">ANGKOR (The Great Irrigation)</option>
                        <option value="majapahit">MAJAPAHIT (Global Trade Hub)</option>
                    </select>
                </div>
                <button id="btn-start" class="btn" style="width: 300px; padding: 20px; font-size: 1.2rem;">ASCEND THE
                    THRONE</button>
            </div>
        </div>
    </div>

    <!-- Choice Event Overlay -->
    <div id="event-overlay" class="overlay hidden">
        <div class="modal-content">
            <span style="font-size: 5rem;" id="event-icon">üö¢</span>
            <h2 id="event-title">Royal Decree</h2>
            <p id="event-desc" style="margin: 20px 0; font-size: 1.1rem; color: #ccc;">A merchant fleet from the West
                seeks special privileges. How shall you respond?</p>
            <div id="event-options" style="display: flex; flex-direction: column; gap: 15px;">
                <!-- Choice buttons injected here -->
            </div>
        </div>
    </div>

    <!-- Game Over Overlay -->
    <div id="end-overlay" class="overlay hidden">
        <div class="modal-content">
            <h2 id="end-h2">The Era Ends</h2>
            <div style="font-size: 1.5rem; margin: 30px 0;">
                <div data-key="final_score">Legacy Score: <b id="final-score-val" style="color: gold;">0</b></div>
                <div data-key="final_rank">Kingdom Status: <b id="final-rank-val" style="color: gold;">Village</b></div>
            </div>
            <div id="end-medals" style="font-size: 3rem; margin-bottom: 30px;">
                <!-- Medals here -->
            </div>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button id="btn-try-again" class="btn" style="padding: 15px 40px;">TRY AGAIN</button>
                <button id="btn-submit" class="btn" style="padding: 15px 40px;">SUBMIT</button>
            </div>
        </div>
    </div>

    <!-- Toast / Note container -->
    <div id="notification-box"></div>

    <!-- Top Score (Fixed) -->
    <div class="top-score-box">
        <span>üèÜ TOP LEGACY:</span>
        <span id="top-score-val">0</span>
    </div>

    <script src="script.js"></script>
</body>

</html>