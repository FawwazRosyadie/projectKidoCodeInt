<!DOCTYPE html>
<html lang="ms">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alam Melayu: Warisan Sosiobudaya & Ekonomi</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="game-wrapper">
        <div id="game-container">
            <!-- Top HUD -->
            <div id="top-bar">
                <div class="stat-box">
                    <span class="stat-label" data-key="score">Score</span>
                    <span id="score-val" class="stat-value">0</span>
                </div>

                <div class="stat-box">
                    <span class="stat-label" id="timer-label" data-key="timer">Timer</span>
                    <span id="timer-val" class="stat-value">02:00</span>
                </div>

                <div class="stat-box" id="combo-box" style="opacity: 0; transition: 0.3s; margin: 0 20px;">
                    <span class="stat-label">Combo</span>
                    <span id="combo-val" class="stat-value" style="color: var(--accent);">0x</span>
                </div>

                <div class="stat-box">
                    <span class="stat-label" data-key="stars">Prosperity</span>
                    <div class="star-container">
                        <span class="star" id="star-1">â˜…</span>
                        <span class="star" id="star-2">â˜…</span>
                        <span class="star" id="star-3">â˜…</span>
                    </div>
                </div>

                <button class="btn-lang" id="lang-toggle">
                    <span id="lang-ms">MS</span>
                    <span id="lang-en">EN</span>
                </button>
            </div>

            <div id="multiplier-bar-container"
                style="position: absolute; top: 110px; left: 50%; transform: translateX(-50%); width: 200px; height: 6px; background: rgba(0,0,0,0.5); border-radius: 3px; overflow: hidden; display: none; z-index: 90;">
                <div id="multiplier-progress"
                    style="width: 100%; height: 100%; background: gold; transition: width 1s linear;"></div>
            </div>

            <!-- Gameplay Area -->
            <div id="game-play-area">
                <div id="conveyor-belt">
                    <span class="river-label" data-key="river">Aliran Warisan / Heritage Flow</span>
                </div>

                <div id="stations-grid">
                    <div class="station" id="station-ekonomi" data-station="ekonomi">
                        <i>âš“</i>
                        <span class="station-name" data-key="st_economy">Pelabuhan & Ekonomi</span>
                        <span class="station-desc" data-key="desc_economy">Dagangan Rempah, Emas & Hasil Laut</span>
                    </div>
                    <div class="station" id="station-bahasa" data-station="bahasa">
                        <i>ğŸ“œ</i>
                        <span class="station-name" data-key="st_culture">Bahasa & Persuratan</span>
                        <span class="station-desc" data-key="desc_culture">Skrip Purba, Hikayat & Karya Sastera</span>
                    </div>
                    <div class="station" id="station-senibina" data-station="senibina">
                        <i>ğŸ•Œ</i>
                        <span class="station-name" data-key="st_arch">Seni Bina</span>
                        <span class="station-desc" data-key="desc_arch">Candi, Masjid & Bandar Purba</span>
                    </div>
                    <div class="station" id="station-sosial" data-station="sosial">
                        <i>ğŸ‘‘</i>
                        <span class="station-name" data-key="st_social">Struktur Sosial</span>
                        <span class="station-desc" data-key="desc_social">Hierarki Raja, Bangsawan & Rakyat</span>
                    </div>
                </div>
            </div>

            <!-- Social Bar -->
            <div id="social-bar">
                <div class="social-chip">
                    <div class="color-dot" style="background: gold;"></div> <span data-key="cls_royal">Diraja</span>
                </div>
                <div class="social-chip">
                    <div class="color-dot" style="background: silver;"></div> <span
                        data-key="cls_noble">Bangsawan</span>
                </div>
                <div class="social-chip">
                    <div class="color-dot" style="background: saddlebrown;"></div> <span data-key="cls_free">Rakyat
                        Merdeka</span>
                </div>
                <div class="social-chip">
                    <div class="color-dot" style="background: #444;"></div> <span data-key="cls_slave">Hamba</span>
                </div>
            </div>

            <!-- Screens -->
            <div id="menu-screen" class="screen active">
                <h1 data-key="title">ALAM MELAYU</h1>
                <div class="subtitle" data-key="subtitle">Empayar Kebudayaan</div>
                <button class="main-menu-btn" id="start-btn" data-key="start">Mula Berkhidmat / Start Service</button>
                <p style="max-width: 600px; opacity: 0.8; line-height: 1.6;" data-key="instruction">
                    Uruskan kegemilangan Kerajaan Alam Melayu. Isih barangan dagangan, skrip purba, dan struktur sosial
                    ke
                    balai yang betul sebelum masa tamat!
                </p>
            </div>

            <div id="result-screen" class="screen">
                <h2 data-key="game_over">Tamat Perkhidmatan</h2>
                <div id="rank-title" class="rank-title">WAZIR AGUNG</div>

                <div class="result-stats">
                    <div class="result-row">
                        <span data-key="final_score">Mata Akhir</span>
                        <span id="final-score-val">0</span>
                    </div>
                    <div class="result-row">
                        <span data-key="top_score">Skor Tertinggi</span>
                        <span id="high-score-val">0</span>
                    </div>
                </div>

                <div id="achievement-list"
                    style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; justify-content: center;">
                    <!-- Achievements pop here -->
                </div>

                <div style="display: flex; gap: 20px; margin-top: 20px;">
                    <button class="main-menu-btn" id="restart-btn" data-key="restart">Main Semula / Play Again</button>
                    <button class="main-menu-btn" id="submit-btn"
                        style="background: linear-gradient(45deg, #2ecc71, #27ae60);">Hantar / Submit</button>
                </div>
            </div>
        </div>

        <!-- Achievements Notification -->
        <div id="ach-popup"
            style="position: absolute; bottom: 20px; right: 20px; background: gold; color: black; padding: 15px; border-radius: 10px; transform: translateX(200%); transition: 0.5s; z-index: 1000; font-weight: 800; display: flex; align-items: center; gap: 10px;">
            <span style="font-size: 2rem;">ğŸ†</span>
            <div>
                <div style="font-size: 0.7rem; text-transform: uppercase; opacity: 0.7;">Achievement Unlocked</div>
                <div id="ach-text">Master Merchant</div>
            </div>
        </div>
    </div>

    <!-- Mock Environment for Local Testing -->
    <script>
        // Use document as root if not in platform
        if (typeof root === 'undefined') {
            window.root = document;
        }
        // Mock game object if not in platform
        if (typeof game === 'undefined') {
            window.game = {
                end: (data) => {
                    console.log('Game Ended:', data);
                    alert('Game Ended! Score: ' + data.score);
                },
                emit: (event, data) => console.log('Event Emitted:', event, data)
            };
        }
    </script>
    <script src="script.js"></script>
</body>

</html>